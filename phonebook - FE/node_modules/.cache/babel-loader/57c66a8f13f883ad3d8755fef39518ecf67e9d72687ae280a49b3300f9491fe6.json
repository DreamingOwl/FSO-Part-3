{"ast":null,"code":"import _objectSpread from\"E:/React/FSO-Part-3/phonebook - FE/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/React/FSO-Part-3/phonebook - FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Persons from'./components/Persons';import PersonForm from'./components/PersonForm';import Filter from'./components/Filter';import personService from'./services/person';import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var message=_ref.message,type=_ref.type;if(message===null){return null;}if(type==='E'){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:message});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:message});}};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),messageType=_useState12[0],setMessageType=_useState12[1];var setMessageAndType=function setMessageAndType(msg,type){setMessage(msg);setMessageType(type);};useEffect(function(){personService.getAll().then(function(initPerson){return setPersons(initPerson);});},[]);var findNameFunc=function findNameFunc(person){return person.name.toUpperCase()===newName.toUpperCase();};var deletePerson=function deletePerson(id){var person=persons.find(function(n){return n.id===id;});if(window.confirm(\"Delete \".concat(person.name,\" ?\"))===true){personService.delete(id).then(setPersons(persons.filter(function(person){return person.id!==id;}))).catch(function(error){setMessageAndType(\"Information of \".concat(person.name,\" has already removed from server\"),'E');setTimeout(function(){setMessageAndType(null,null);},5000);setPersons(persons.filter(function(p){return p.id!==id;}));});}};var addPerson=function addPerson(event){event.preventDefault();var personObject=persons.find(findNameFunc);if(typeof personObject==='undefined'){personService.create({name:newName,number:newNumber,id:persons.reduce(function(maxId,person){return Math.max(maxId,person.id);},0)+1}).then(function(returnedPerson){setMessageAndType(\"Added \".concat(returnedPerson.name),'S');setTimeout(function(){setMessageAndType(null,null);},5000);setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');}).catch(function(error){setMessageAndType(\"Unable to add \".concat(newName),'E');setTimeout(function(){setMessageAndType(null,null);},5000);});}else{if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var changedObject=_objectSpread(_objectSpread({},personObject),{},{number:newNumber});personService.update(changedObject.id,changedObject).then(function(returnedPerson){setMessageAndType(\"Updated \".concat(returnedPerson.name),'S');setTimeout(function(){setMessageAndType(null,null);},5000);setPersons(persons.map(function(person){return person.id!==changedObject.id?person:returnedPerson;}));setNewName('');setNewNumber('');}).catch(function(error){setMessageAndType(\"Unable to update \".concat(newName),'E');setTimeout(function(){setMessageAndType(null,null);},5000);});}}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){setNewFilter(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message,type:messageType}),/*#__PURE__*/_jsx(Filter,{newFilter:newFilter,handleFilterChange:handleFilterChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"add a new\"}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newName:newName,newNumber:newNumber,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:persons.filter(function(person){return person.name.toUpperCase().search(newFilter.toUpperCase())===-1?false:true;}),deleteFunc:deletePerson})]});};export default App;","map":{"version":3,"names":["Persons","PersonForm","Filter","personService","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Notification","_ref","message","type","className","children","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setNewFilter","_useState9","_useState10","setMessage","_useState11","_useState12","messageType","setMessageType","setMessageAndType","msg","getAll","then","initPerson","findNameFunc","person","name","toUpperCase","deletePerson","id","find","n","window","confirm","concat","delete","filter","catch","error","setTimeout","p","addPerson","event","preventDefault","personObject","create","number","reduce","maxId","Math","max","returnedPerson","changedObject","_objectSpread","update","map","handleNameChange","target","value","handleNumberChange","handleFilterChange","search","deleteFunc"],"sources":["E:/React/FSO-Part-3/phonebook - FE/src/App.js"],"sourcesContent":["import Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personService from './services/person'\nimport { useState, useEffect } from 'react'\n\nconst Notification = ({ message, type }) => {\n  \n  if (message === null) {\n    return null\n  }\n\n  if (type === 'E'){\n    return (\n      <div className='error'>\n        {message}\n      </div>\n    )\n  }\n  else{\n\n    return (\n      <div className='success'>\n        {message}\n      </div>\n    )\n  \n  }\n\n}\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [messageType, setMessageType] = useState(null)\n\n  const setMessageAndType = (msg, type) => {\n    setMessage(msg)\n    setMessageType(type)\n  }\n\n  useEffect(() => {\n    personService.getAll()\n                 .then(initPerson => setPersons(initPerson))\n\n  }, [])\n\n  const findNameFunc = (person) => person.name.toUpperCase() === newName.toUpperCase()\n\n  const deletePerson = id => {\n    const person = persons.find(n => n.id === id)\n    \n    if( window.confirm(`Delete ${person.name} ?`) === true ){\n      personService\n                  .delete(id)\n                  .then(setPersons(persons.filter(person => person.id !== id)))\n                  .catch(error => {\n                    setMessageAndType( `Information of ${person.name} has already removed from server`, 'E')\n                    setTimeout(() => {\n                      setMessageAndType(null,null)\n                    }, 5000)\n                    setPersons(persons.filter(p => p.id !== id))\n                  }) \n    }\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = persons.find(findNameFunc)\n\n    if(typeof personObject === 'undefined'){\n      personService.create({\n                      name: newName,\n                      number: newNumber,\n                      id: persons.reduce((maxId, person) => Math.max(maxId, person.id) ,0) + 1\n                    })\n                   .then(returnedPerson => {\n                        setMessageAndType( `Added ${returnedPerson.name}`, 'S')\n                        setTimeout(() => {\n                          setMessageAndType(null, null)\n                        }, 5000)\n                        setPersons(persons.concat(returnedPerson))\n                        setNewName('')\n                        setNewNumber('')\n                    })\n                  .catch(error => {\n                        setMessageAndType( `Unable to add ${newName}`, 'E')\n                        setTimeout(() => {\n                          setMessageAndType(null,null)\n                        }, 5000)\n                    }) \n      \n    }\n    else{\n      if( window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n\n        const changedObject = { ...personObject, number: newNumber}\n\n        personService.update(changedObject.id, changedObject)\n                      .then(returnedPerson => {\n                            setMessageAndType( `Updated ${returnedPerson.name}`, 'S')\n                            setTimeout(() => {\n                              setMessageAndType(null, null)\n                            }, 5000)\n\n                            setPersons(persons.map(person => person.id !== changedObject.id ? person : returnedPerson ))\n                            setNewName('')\n                            setNewNumber('')\n                      })\n                      .catch(error => {\n                        setMessageAndType( `Unable to update ${newName}`, 'E')\n                        setTimeout(() => {\n                          setMessageAndType(null,null)\n                        }, 5000)\n                      }) \n                      \n      }\n    }\n    \n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} type={messageType} />\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n       \n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n      \n      <h3>Numbers</h3>\n      <Persons persons={persons.filter(person =>  person.name.toUpperCase().search(newFilter.toUpperCase()) === -1 ? false : true )} deleteFunc={deletePerson} />\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}